import{d as W,m as z,c as F,b as l,e as r,h as X,w as y,a as d,t as x,x as Y,z as h,o as E,A as Z,q as B,F as L,r as ee,f as D,g as te}from"./app-D1aKf6HQ.js";import{_ as b}from"./InputError.vue_vue_type_script_setup_true_lang-CgL9GBe8.js";import{_ as C}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-r842F5tj.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-iBsxnF0S.js";import{_ as V}from"./Label.vue_vue_type_script_setup_true_lang-CiogYGa6.js";import{_ as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-C0q0I7zG.js";import{q as v,a as $}from"./index-BDqSilVs.js";import"./index-7JXnH-aQ.js";import"./useForwardExpose-DIjMSpfh.js";import"./VisuallyHidden-DVQk3b_7.js";import"./useForwardPropsEmits-CbqjJXiP.js";import"./createLucideIcon-lstEoCdR.js";import"./index-ZGzMK47R.js";const a=e=>({url:a.url(e),method:"get"});a.definition={methods:["get","head"],url:"/products"};a.url=e=>a.definition.url+v(e);a.get=e=>({url:a.url(e),method:"get"});a.head=e=>({url:a.url(e),method:"head"});const S=e=>({action:a.url(e),method:"get"});S.get=e=>({action:a.url(e),method:"get"});S.head=e=>({action:a.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});a.form=S;const m=e=>({url:m.url(e),method:"get"});m.definition={methods:["get","head"],url:"/products/create"};m.url=e=>m.definition.url+v(e);m.get=e=>({url:m.url(e),method:"get"});m.head=e=>({url:m.url(e),method:"head"});const U=e=>({action:m.url(e),method:"get"});U.get=e=>({action:m.url(e),method:"get"});U.head=e=>({action:m.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});m.form=U;const f=e=>({url:f.url(e),method:"post"});f.definition={methods:["post"],url:"/products"};f.url=e=>f.definition.url+v(e);f.post=e=>({url:f.url(e),method:"post"});const I=e=>({action:f.url(e),method:"post"});I.post=e=>({action:f.url(e),method:"post"});f.form=I;const p=(e,t)=>({url:p.url(e,t),method:"get"});p.definition={methods:["get","head"],url:"/products/{product}"};p.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={product:e}),Array.isArray(e)&&(e={product:e[0]}),e=$(e);const g={product:e.product};return p.definition.url.replace("{product}",g.product.toString()).replace(/\/+$/,"")+v(t)};p.get=(e,t)=>({url:p.url(e,t),method:"get"});p.head=(e,t)=>({url:p.url(e,t),method:"head"});const w=(e,t)=>({action:p.url(e,t),method:"get"});w.get=(e,t)=>({action:p.url(e,t),method:"get"});w.head=(e,t)=>({action:p.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});p.form=w;const c=(e,t)=>({url:c.url(e,t),method:"get"});c.definition={methods:["get","head"],url:"/products/{product}/edit"};c.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={product:e}),Array.isArray(e)&&(e={product:e[0]}),e=$(e);const g={product:e.product};return c.definition.url.replace("{product}",g.product.toString()).replace(/\/+$/,"")+v(t)};c.get=(e,t)=>({url:c.url(e,t),method:"get"});c.head=(e,t)=>({url:c.url(e,t),method:"head"});const N=(e,t)=>({action:c.url(e,t),method:"get"});N.get=(e,t)=>({action:c.url(e,t),method:"get"});N.head=(e,t)=>({action:c.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});c.form=N;const n=(e,t)=>({url:n.url(e,t),method:"put"});n.definition={methods:["put","patch"],url:"/products/{product}"};n.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={product:e}),Array.isArray(e)&&(e={product:e[0]}),e=$(e);const g={product:e.product};return n.definition.url.replace("{product}",g.product.toString()).replace(/\/+$/,"")+v(t)};n.put=(e,t)=>({url:n.url(e,t),method:"put"});n.patch=(e,t)=>({url:n.url(e,t),method:"patch"});const T=(e,t)=>({action:n.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});T.put=(e,t)=>({action:n.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});T.patch=(e,t)=>({action:n.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});n.form=T;const _=(e,t)=>({url:_.url(e,t),method:"delete"});_.definition={methods:["delete"],url:"/products/{product}"};_.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={product:e}),Array.isArray(e)&&(e={product:e[0]}),e=$(e);const g={product:e.product};return _.definition.url.replace("{product}",g.product.toString()).replace(/\/+$/,"")+v(t)};_.delete=(e,t)=>({url:_.url(e,t),method:"delete"});const M=(e,t)=>({action:_.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});M.delete=(e,t)=>({action:_.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});_.form=M;const P={store:f,update:n,destroy:_},oe={class:"space-y-6 p-4"},de={class:"rounded-xl border border-sidebar-border/70 bg-background p-4"},se={class:"text-xl font-semibold"},le={class:"grid gap-2"},ue={class:"grid gap-2"},ie={class:"grid gap-2"},ne={class:"grid gap-2"},ae={class:"grid gap-2"},me={class:"grid gap-2"},pe={class:"col-span-full flex gap-2"},ce={class:"rounded-xl border border-sidebar-border/70 bg-background p-4"},ye={class:"mt-4 overflow-x-auto"},ge={class:"w-full min-w-[720px] text-sm"},he={key:0},fe={class:"px-2 py-2"},_e={class:"px-2 py-2"},xe={class:"px-2 py-2"},be={class:"px-2 py-2"},ve={class:"px-2 py-2"},Qe={class:"px-2 py-2"},qe={class:"px-2 py-2"},Ve={class:"flex gap-2"},He=W({__name:"index",props:{products:{}},setup(e){const t=e,g=D(()=>t.products),G=[{title:"Productos",href:"./products"}],k=te(null),s=z({name:"",description:"",stock:"",price_unit:"",price_higher:"",expiration_date:""}),Q=z({}),j=D(()=>Q.errors.delete),A=D(()=>k.value!==null),H=()=>{k.value=null,s.reset(),s.clearErrors()},J=i=>{k.value=i.id,s.clearErrors(),s.name=i.name,s.description=i.description,s.stock=i.stock,s.price_unit=i.price_unit,s.price_higher=i.price_higher,s.expiration_date=i.expiration_date},K=()=>{const i={preserveScroll:!0,onSuccess:()=>H()};if(A.value&&k.value!==null){s.put(P.update.url(k.value),i);return}s.post(P.store.url(),i)},O=i=>{confirm(`Eliminar producto "${i.name}"?`)&&Q.delete(P.destroy.url(i.id),{preserveScroll:!0})};return(i,o)=>(E(),F(L,null,[l(r(X),{title:"Products"}),l(re,{breadcrumbs:G},{default:y(()=>[d("div",oe,[d("section",de,[d("h1",se,x(A.value?"Editar producto":"Nuevo producto"),1),o[13]||(o[13]=d("p",{class:"mt-1 text-sm text-muted-foreground"}," Gestiona los productos desde esta ventana. ",-1)),d("form",{class:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:Y(K,["prevent"])},[d("div",le,[l(r(V),{for:"name"},{default:y(()=>[...o[6]||(o[6]=[h("Nombre",-1)])]),_:1}),l(r(q),{id:"name",modelValue:r(s).name,"onUpdate:modelValue":o[0]||(o[0]=u=>r(s).name=u),type:"text",required:""},null,8,["modelValue"]),l(b,{message:r(s).errors.name},null,8,["message"])]),d("div",ue,[l(r(V),{for:"email"},{default:y(()=>[...o[7]||(o[7]=[h("Descripcion",-1)])]),_:1}),l(r(q),{id:"email",modelValue:r(s).description,"onUpdate:modelValue":o[1]||(o[1]=u=>r(s).description=u),type:"text",required:""},null,8,["modelValue"]),l(b,{message:r(s).errors.description},null,8,["message"])]),d("div",ie,[l(r(V),{for:"email"},{default:y(()=>[...o[8]||(o[8]=[h("Stock",-1)])]),_:1}),l(r(q),{id:"email",modelValue:r(s).stock,"onUpdate:modelValue":o[2]||(o[2]=u=>r(s).stock=u),type:"text",required:""},null,8,["modelValue"]),l(b,{message:r(s).errors.stock},null,8,["message"])]),d("div",ne,[l(r(V),{for:"personal"},{default:y(()=>[...o[9]||(o[9]=[h("Precion unitario",-1)])]),_:1}),l(r(q),{id:"personal",modelValue:r(s).price_unit,"onUpdate:modelValue":o[3]||(o[3]=u=>r(s).price_unit=u),type:"text"},null,8,["modelValue"]),l(b,{message:r(s).errors.price_unit},null,8,["message"])]),d("div",ae,[l(r(V),{for:"personal"},{default:y(()=>[...o[10]||(o[10]=[h("Precion por Mayor",-1)])]),_:1}),l(r(q),{id:"personal",modelValue:r(s).price_higher,"onUpdate:modelValue":o[4]||(o[4]=u=>r(s).price_higher=u),type:"text"},null,8,["modelValue"]),l(b,{message:r(s).errors.price_higher},null,8,["message"])]),d("div",me,[l(r(V),{for:"role"},{default:y(()=>[...o[11]||(o[11]=[h("Fecha Vencimiento",-1)])]),_:1}),l(r(q),{id:"personal",modelValue:r(s).expiration_date,"onUpdate:modelValue":o[5]||(o[5]=u=>r(s).expiration_date=u),type:"date"},null,8,["modelValue"]),l(b,{message:r(s).errors.expiration_date},null,8,["message"])]),d("div",pe,[l(r(C),{type:"submit",disabled:r(s).processing||r(Q).processing},{default:y(()=>[h(x(A.value?"Actualizar":"Crear"),1)]),_:1},8,["disabled"]),A.value?(E(),Z(r(C),{key:0,type:"button",variant:"secondary",disabled:r(s).processing||r(Q).processing,onClick:H},{default:y(()=>[...o[12]||(o[12]=[h(" Cancelar ",-1)])]),_:1},8,["disabled"])):B("",!0)])],32)]),d("section",ce,[o[18]||(o[18]=d("h2",{class:"text-lg font-semibold"},"Listado de productos",-1)),d("div",ye,[d("table",ge,[o[17]||(o[17]=d("thead",{class:"border-b text-left"},[d("tr",null,[d("th",{class:"px-2 py-2"},"ID"),d("th",{class:"px-2 py-2"},"Nombre"),d("th",{class:"px-2 py-2"},"Descripcion"),d("th",{class:"px-2 py-2"},"Stock"),d("th",{class:"px-2 py-2"},"Precio unitario"),d("th",{class:"px-2 py-2"},"Precio al mayor"),d("th",{class:"px-2 py-2"},"Fecha Vencimiento")])],-1)),d("tbody",null,[g.value.length===0?(E(),F("tr",he,[...o[14]||(o[14]=[d("td",{colspan:"6",class:"px-2 py-4 text-center text-muted-foreground"}," No hay productos registrados. ",-1)])])):B("",!0),(E(!0),F(L,null,ee(g.value,u=>(E(),F("tr",{key:u.id,class:"border-b"},[d("td",fe,x(u.id),1),d("td",_e,x(u.name),1),d("td",xe,x(u.description),1),d("td",be,x(u.stock),1),d("td",ve,x(u.price_unit),1),d("td",Qe,x(u.price_higher),1),d("td",qe,[d("div",Ve,[l(r(C),{type:"button",variant:"secondary",size:"sm",disabled:r(s).processing||r(Q).processing,onClick:R=>J(u)},{default:y(()=>[...o[15]||(o[15]=[h(" Editar ",-1)])]),_:1},8,["disabled","onClick"]),l(r(C),{type:"button",variant:"destructive",size:"sm",disabled:r(s).processing||r(Q).processing,onClick:R=>O(u)},{default:y(()=>[...o[16]||(o[16]=[h(" Eliminar ",-1)])]),_:1},8,["disabled","onClick"])])])]))),128))])])]),l(b,{message:j.value,class:"mt-3"},null,8,["message"])])])]),_:1})],64))}});export{He as default};
