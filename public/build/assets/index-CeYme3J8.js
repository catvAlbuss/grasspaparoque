import{d as Y,m as L,c as q,b as d,e as t,h as Z,w as f,a as s,t as b,x as ee,z as g,p as re,o as x,F as U,r as I,s as te,q as D,A as oe,f as C,g as se}from"./app-D1aKf6HQ.js";import{q as w,a as F}from"./index-BDqSilVs.js";import{_ as A}from"./InputError.vue_vue_type_script_setup_true_lang-CgL9GBe8.js";import{_ as $}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-r842F5tj.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-iBsxnF0S.js";import{_ as E}from"./Label.vue_vue_type_script_setup_true_lang-CiogYGa6.js";import{h as le,_ as ue}from"./AppLayout.vue_vue_type_script_setup_true_lang-C0q0I7zG.js";import"./index-7JXnH-aQ.js";import"./useForwardExpose-DIjMSpfh.js";import"./VisuallyHidden-DVQk3b_7.js";import"./useForwardPropsEmits-CbqjJXiP.js";import"./createLucideIcon-lstEoCdR.js";import"./index-ZGzMK47R.js";const n=e=>({url:n.url(e),method:"get"});n.definition={methods:["get","head"],url:"/users"};n.url=e=>n.definition.url+w(e);n.get=e=>({url:n.url(e),method:"get"});n.head=e=>({url:n.url(e),method:"head"});const N=e=>({action:n.url(e),method:"get"});N.get=e=>({action:n.url(e),method:"get"});N.head=e=>({action:n.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});n.form=N;const m=e=>({url:m.url(e),method:"get"});m.definition={methods:["get","head"],url:"/users/create"};m.url=e=>m.definition.url+w(e);m.get=e=>({url:m.url(e),method:"get"});m.head=e=>({url:m.url(e),method:"head"});const P=e=>({action:m.url(e),method:"get"});P.get=e=>({action:m.url(e),method:"get"});P.head=e=>({action:m.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});m.form=P;const h=e=>({url:h.url(e),method:"post"});h.definition={methods:["post"],url:"/users"};h.url=e=>h.definition.url+w(e);h.post=e=>({url:h.url(e),method:"post"});const M=e=>({action:h.url(e),method:"post"});M.post=e=>({action:h.url(e),method:"post"});h.form=M;const p=(e,r)=>({url:p.url(e,r),method:"get"});p.definition={methods:["get","head"],url:"/users/{user}"};p.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),Array.isArray(e)&&(e={user:e[0]}),e=F(e);const y={user:e.user};return p.definition.url.replace("{user}",y.user.toString()).replace(/\/+$/,"")+w(r)};p.get=(e,r)=>({url:p.url(e,r),method:"get"});p.head=(e,r)=>({url:p.url(e,r),method:"head"});const T=(e,r)=>({action:p.url(e,r),method:"get"});T.get=(e,r)=>({action:p.url(e,r),method:"get"});T.head=(e,r)=>({action:p.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...r?.query??r?.mergeQuery??{}}}),method:"get"});p.form=T;const c=(e,r)=>({url:c.url(e,r),method:"get"});c.definition={methods:["get","head"],url:"/users/{user}/edit"};c.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),Array.isArray(e)&&(e={user:e[0]}),e=F(e);const y={user:e.user};return c.definition.url.replace("{user}",y.user.toString()).replace(/\/+$/,"")+w(r)};c.get=(e,r)=>({url:c.url(e,r),method:"get"});c.head=(e,r)=>({url:c.url(e,r),method:"head"});const H=(e,r)=>({action:c.url(e,r),method:"get"});H.get=(e,r)=>({action:c.url(e,r),method:"get"});H.head=(e,r)=>({action:c.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...r?.query??r?.mergeQuery??{}}}),method:"get"});c.form=H;const a=(e,r)=>({url:a.url(e,r),method:"put"});a.definition={methods:["put","patch"],url:"/users/{user}"};a.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),Array.isArray(e)&&(e={user:e[0]}),e=F(e);const y={user:e.user};return a.definition.url.replace("{user}",y.user.toString()).replace(/\/+$/,"")+w(r)};a.put=(e,r)=>({url:a.url(e,r),method:"put"});a.patch=(e,r)=>({url:a.url(e,r),method:"patch"});const z=(e,r)=>({action:a.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...r?.query??r?.mergeQuery??{}}}),method:"post"});z.put=(e,r)=>({action:a.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...r?.query??r?.mergeQuery??{}}}),method:"post"});z.patch=(e,r)=>({action:a.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...r?.query??r?.mergeQuery??{}}}),method:"post"});a.form=z;const _=(e,r)=>({url:_.url(e,r),method:"delete"});_.definition={methods:["delete"],url:"/users/{user}"};_.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),Array.isArray(e)&&(e={user:e[0]}),e=F(e);const y={user:e.user};return _.definition.url.replace("{user}",y.user.toString()).replace(/\/+$/,"")+w(r)};_.delete=(e,r)=>({url:_.url(e,r),method:"delete"});const R=(e,r)=>({action:_.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...r?.query??r?.mergeQuery??{}}}),method:"post"});R.delete=(e,r)=>({action:_.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...r?.query??r?.mergeQuery??{}}}),method:"post"});_.form=R;const S={store:h,update:a,destroy:_},de={class:"space-y-6 p-4"},ae={class:"rounded-xl border border-sidebar-border/70 bg-background p-4"},ie={class:"text-xl font-semibold"},ne={class:"grid gap-2"},me={class:"grid gap-2"},pe={class:"grid gap-2"},ce={class:"grid gap-2"},fe=["value"],ye={class:"grid gap-2"},ge={key:0,class:"text-xs text-muted-foreground"},he={class:"grid gap-2"},_e={class:"col-span-full flex gap-2"},be={class:"rounded-xl border border-sidebar-border/70 bg-background p-4"},xe={class:"mt-4 overflow-x-auto"},ve={class:"w-full min-w-[720px] text-sm"},qe={key:0},we={class:"px-2 py-2"},Qe={class:"px-2 py-2"},Ae={class:"px-2 py-2"},Ee={class:"px-2 py-2"},Ve={class:"px-2 py-2"},ke={class:"px-2 py-2"},Ce={class:"flex gap-2"},Me=Y({__name:"index",props:{users:{},roles:{}},setup(e){const r=e,y=C(()=>r.users),G=C(()=>r.roles),j=[{title:"Usuarios",href:le().url}],V=se(null),l=L({name:"",email:"",personal:"",role:r.roles[0]??"",password:"",password_confirmation:""}),Q=L({}),J=C(()=>Q.errors.delete),v=C(()=>V.value!==null),B=()=>{V.value=null,l.reset(),l.clearErrors(),l.role=r.roles[0]??""},K=i=>{V.value=i.id,l.clearErrors(),l.name=i.name,l.email=i.email,l.personal=i.personal??"",l.role=i.role??r.roles[0]??"",l.password="",l.password_confirmation=""},O=()=>{const i={preserveScroll:!0,onSuccess:()=>B()};if(v.value&&V.value!==null){l.put(S.update.url(V.value),i);return}l.post(S.store.url(),i)},W=i=>{confirm(`Eliminar usuario "${i.name}"?`)&&Q.delete(S.destroy.url(i.id),{preserveScroll:!0})};return(i,o)=>(x(),q(U,null,[d(t(Z),{title:"Usuarios"}),d(ue,{breadcrumbs:j},{default:f(()=>[s("div",de,[s("section",ae,[s("h1",ie,b(v.value?"Editar usuario":"Nuevo usuario"),1),o[13]||(o[13]=s("p",{class:"mt-1 text-sm text-muted-foreground"}," Gestiona usuarios, rol y personal desde esta misma vista. ",-1)),s("form",{class:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:ee(O,["prevent"])},[s("div",ne,[d(t(E),{for:"name"},{default:f(()=>[...o[6]||(o[6]=[g("Nombre",-1)])]),_:1}),d(t(k),{id:"name",modelValue:t(l).name,"onUpdate:modelValue":o[0]||(o[0]=u=>t(l).name=u),type:"text",required:""},null,8,["modelValue"]),d(A,{message:t(l).errors.name},null,8,["message"])]),s("div",me,[d(t(E),{for:"email"},{default:f(()=>[...o[7]||(o[7]=[g("Correo",-1)])]),_:1}),d(t(k),{id:"email",modelValue:t(l).email,"onUpdate:modelValue":o[1]||(o[1]=u=>t(l).email=u),type:"email",required:""},null,8,["modelValue"]),d(A,{message:t(l).errors.email},null,8,["message"])]),s("div",pe,[d(t(E),{for:"personal"},{default:f(()=>[...o[8]||(o[8]=[g("Personal",-1)])]),_:1}),d(t(k),{id:"personal",modelValue:t(l).personal,"onUpdate:modelValue":o[2]||(o[2]=u=>t(l).personal=u),type:"text"},null,8,["modelValue"]),d(A,{message:t(l).errors.personal},null,8,["message"])]),s("div",ce,[d(t(E),{for:"role"},{default:f(()=>[...o[9]||(o[9]=[g("Rol",-1)])]),_:1}),re(s("select",{id:"role","onUpdate:modelValue":o[3]||(o[3]=u=>t(l).role=u),required:"",class:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-xs transition-colors outline-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50"},[(x(!0),q(U,null,I(G.value,u=>(x(),q("option",{key:u,value:u},b(u),9,fe))),128))],512),[[te,t(l).role]]),d(A,{message:t(l).errors.role},null,8,["message"])]),s("div",ye,[d(t(E),{for:"password"},{default:f(()=>[o[10]||(o[10]=g(" Password ",-1)),v.value?(x(),q("span",ge,"(opcional en edicion)")):D("",!0)]),_:1}),d(t(k),{id:"password",modelValue:t(l).password,"onUpdate:modelValue":o[4]||(o[4]=u=>t(l).password=u),type:"password",required:!v.value},null,8,["modelValue","required"]),d(A,{message:t(l).errors.password},null,8,["message"])]),s("div",he,[d(t(E),{for:"password_confirmation"},{default:f(()=>[...o[11]||(o[11]=[g("Confirmar password",-1)])]),_:1}),d(t(k),{id:"password_confirmation",modelValue:t(l).password_confirmation,"onUpdate:modelValue":o[5]||(o[5]=u=>t(l).password_confirmation=u),type:"password",required:!v.value},null,8,["modelValue","required"])]),s("div",_e,[d(t($),{type:"submit",disabled:t(l).processing||t(Q).processing},{default:f(()=>[g(b(v.value?"Actualizar":"Crear"),1)]),_:1},8,["disabled"]),v.value?(x(),oe(t($),{key:0,type:"button",variant:"secondary",disabled:t(l).processing||t(Q).processing,onClick:B},{default:f(()=>[...o[12]||(o[12]=[g(" Cancelar ",-1)])]),_:1},8,["disabled"])):D("",!0)])],32)]),s("section",be,[o[18]||(o[18]=s("h2",{class:"text-lg font-semibold"},"Listado de usuarios",-1)),s("div",xe,[s("table",ve,[o[17]||(o[17]=s("thead",{class:"border-b text-left"},[s("tr",null,[s("th",{class:"px-2 py-2"},"ID"),s("th",{class:"px-2 py-2"},"Nombre"),s("th",{class:"px-2 py-2"},"Correo"),s("th",{class:"px-2 py-2"},"Personal"),s("th",{class:"px-2 py-2"},"Rol"),s("th",{class:"px-2 py-2"},"Acciones")])],-1)),s("tbody",null,[y.value.length===0?(x(),q("tr",qe,[...o[14]||(o[14]=[s("td",{colspan:"6",class:"px-2 py-4 text-center text-muted-foreground"}," No hay usuarios registrados. ",-1)])])):D("",!0),(x(!0),q(U,null,I(y.value,u=>(x(),q("tr",{key:u.id,class:"border-b"},[s("td",we,b(u.id),1),s("td",Qe,b(u.name),1),s("td",Ae,b(u.email),1),s("td",Ee,b(u.personal??"-"),1),s("td",Ve,b(u.role??"-"),1),s("td",ke,[s("div",Ce,[d(t($),{type:"button",variant:"secondary",size:"sm",disabled:t(l).processing||t(Q).processing,onClick:X=>K(u)},{default:f(()=>[...o[15]||(o[15]=[g(" Editar ",-1)])]),_:1},8,["disabled","onClick"]),d(t($),{type:"button",variant:"destructive",size:"sm",disabled:t(l).processing||t(Q).processing,onClick:X=>W(u)},{default:f(()=>[...o[16]||(o[16]=[g(" Eliminar ",-1)])]),_:1},8,["disabled","onClick"])])])]))),128))])])]),d(A,{message:J.value,class:"mt-3"},null,8,["message"])])])]),_:1})],64))}});export{Me as default};
