import{d as re,m as z,c as U,b as i,e as r,h as oe,w as a,a as s,t as g,x as se,z as m,p as de,s as ie,o as k,A as le,q as B,F as O,r as ue,f as I,g as ae}from"./app-D1aKf6HQ.js";import{_ as Q}from"./InputError.vue_vue_type_script_setup_true_lang-CgL9GBe8.js";import{_ as $}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-r842F5tj.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-iBsxnF0S.js";import{_ as q}from"./Label.vue_vue_type_script_setup_true_lang-CiogYGa6.js";import{_ as ne}from"./AppLayout.vue_vue_type_script_setup_true_lang-C0q0I7zG.js";import{a as H,q as x}from"./index-BDqSilVs.js";import"./index-7JXnH-aQ.js";import"./useForwardExpose-DIjMSpfh.js";import"./VisuallyHidden-DVQk3b_7.js";import"./useForwardPropsEmits-CbqjJXiP.js";import"./createLucideIcon-lstEoCdR.js";import"./index-ZGzMK47R.js";const p=e=>({url:p.url(e),method:"get"});p.definition={methods:["get","head"],url:"/reservations/busy"};p.url=e=>p.definition.url+x(e);p.get=e=>({url:p.url(e),method:"get"});p.head=e=>({url:p.url(e),method:"head"});const S=e=>({action:p.url(e),method:"get"});S.get=e=>({action:p.url(e),method:"get"});S.head=e=>({action:p.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});p.form=S;const c=e=>({url:c.url(e),method:"get"});c.definition={methods:["get","head"],url:"/events/type_events"};c.url=e=>c.definition.url+x(e);c.get=e=>({url:c.url(e),method:"get"});c.head=e=>({url:c.url(e),method:"head"});const w=e=>({action:c.url(e),method:"get"});w.get=e=>({action:c.url(e),method:"get"});w.head=e=>({action:c.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});c.form=w;const A=e=>({url:A.url(e),method:"post"});A.definition={methods:["post"],url:"/reservations/customers"};A.url=e=>A.definition.url+x(e);A.post=e=>({url:A.url(e),method:"post"});const G=e=>({action:A.url(e),method:"post"});G.post=e=>({action:A.url(e),method:"post"});A.form=G;const E=e=>({url:E.url(e),method:"post"});E.definition={methods:["post"],url:"/reservations"};E.url=e=>E.definition.url+x(e);E.post=e=>({url:E.url(e),method:"post"});const J=e=>({action:E.url(e),method:"post"});J.post=e=>({action:E.url(e),method:"post"});E.form=J;const y=e=>({url:y.url(e),method:"get"});y.definition={methods:["get","head"],url:"/reservations"};y.url=e=>y.definition.url+x(e);y.get=e=>({url:y.url(e),method:"get"});y.head=e=>({url:y.url(e),method:"head"});const j=e=>({action:y.url(e),method:"get"});j.get=e=>({action:y.url(e),method:"get"});j.head=e=>({action:y.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});y.form=j;const f=e=>({url:f.url(e),method:"get"});f.definition={methods:["get","head"],url:"/reservations/create"};f.url=e=>f.definition.url+x(e);f.get=e=>({url:f.url(e),method:"get"});f.head=e=>({url:f.url(e),method:"head"});const T=e=>({action:f.url(e),method:"get"});T.get=e=>({action:f.url(e),method:"get"});T.head=e=>({action:f.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});f.form=T;const _=(e,t)=>({url:_.url(e,t),method:"get"});_.definition={methods:["get","head"],url:"/reservations/{reservation}"};_.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={reservation:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={reservation:e.id}),Array.isArray(e)&&(e={reservation:e[0]}),e=H(e);const h={reservation:typeof e.reservation=="object"?e.reservation.id:e.reservation};return _.definition.url.replace("{reservation}",h.reservation.toString()).replace(/\/+$/,"")+x(t)};_.get=(e,t)=>({url:_.url(e,t),method:"get"});_.head=(e,t)=>({url:_.url(e,t),method:"head"});const L=(e,t)=>({action:_.url(e,t),method:"get"});L.get=(e,t)=>({action:_.url(e,t),method:"get"});L.head=(e,t)=>({action:_.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});_.form=L;const v=(e,t)=>({url:v.url(e,t),method:"get"});v.definition={methods:["get","head"],url:"/reservations/{reservation}/edit"};v.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={reservation:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={reservation:e.id}),Array.isArray(e)&&(e={reservation:e[0]}),e=H(e);const h={reservation:typeof e.reservation=="object"?e.reservation.id:e.reservation};return v.definition.url.replace("{reservation}",h.reservation.toString()).replace(/\/+$/,"")+x(t)};v.get=(e,t)=>({url:v.url(e,t),method:"get"});v.head=(e,t)=>({url:v.url(e,t),method:"head"});const N=(e,t)=>({action:v.url(e,t),method:"get"});N.get=(e,t)=>({action:v.url(e,t),method:"get"});N.head=(e,t)=>({action:v.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});v.form=N;const n=(e,t)=>({url:n.url(e,t),method:"put"});n.definition={methods:["put","patch"],url:"/reservations/{reservation}"};n.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={reservation:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={reservation:e.id}),Array.isArray(e)&&(e={reservation:e[0]}),e=H(e);const h={reservation:typeof e.reservation=="object"?e.reservation.id:e.reservation};return n.definition.url.replace("{reservation}",h.reservation.toString()).replace(/\/+$/,"")+x(t)};n.put=(e,t)=>({url:n.url(e,t),method:"put"});n.patch=(e,t)=>({url:n.url(e,t),method:"patch"});const P=(e,t)=>({action:n.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});P.put=(e,t)=>({action:n.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});P.patch=(e,t)=>({action:n.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});n.form=P;const b=(e,t)=>({url:b.url(e,t),method:"delete"});b.definition={methods:["delete"],url:"/reservations/{reservation}"};b.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={reservation:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={reservation:e.id}),Array.isArray(e)&&(e={reservation:e[0]}),e=H(e);const h={reservation:typeof e.reservation=="object"?e.reservation.id:e.reservation};return b.definition.url.replace("{reservation}",h.reservation.toString()).replace(/\/+$/,"")+x(t)};b.delete=(e,t)=>({url:b.url(e,t),method:"delete"});const K=(e,t)=>({action:b.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});K.delete=(e,t)=>({action:b.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});b.form=K;const M={update:n,destroy:b},me={class:"space-y-6 p-4"},pe={class:"rounded-xl border border-sidebar-border/70 bg-background p-4"},ce={class:"text-xl font-semibold"},ye={class:"grid gap-2"},fe={class:"grid gap-2"},_e={class:"grid gap-2"},ve={class:"grid gap-2"},he={class:"grid gap-2"},ge={class:"grid gap-2"},be={class:"grid gap-2"},xe={class:"grid gap-2"},Qe={class:"col-span-full flex gap-2"},Ae={class:"rounded-xl border border-sidebar-border/70 bg-background p-4"},Ee={class:"mt-4 overflow-x-auto"},qe={class:"w-full min-w-[720px] text-sm"},Ve={key:0},De={class:"px-2 py-2"},Fe={class:"px-2 py-2"},ke={class:"px-2 py-2"},Ce={class:"px-2 py-2"},Ue={class:"px-2 py-2"},$e={class:"px-2 py-2"},He={class:"px-2 py-2"},Ie={class:"px-2 py-2"},Se={class:"px-2 py-2"},we={class:"flex gap-2"},We=re({__name:"index",props:{reservations:{},eventos:{}},setup(e){const t=e,h=I(()=>t.reservations),W=[{title:"inicio",href:"./dashboard"}],D=ae(null),d=z({id_evento:"",id_user:"",id_pay:"",id_customer:"",start_time:"",end_time:"",date:"",reservation_status:""}),F=z({}),X=I(()=>F.errors.delete),C=I(()=>D.value!==null),R=()=>{D.value=null,d.reset(),d.clearErrors()},Y=u=>{D.value=u.id,d.clearErrors(),d.id_evento=u.id_evento,d.id_user=u.id_user,d.id_pay=u.id_pay,d.id_customer=u.id_customer,d.start_time=u.start_time,d.end_time=u.end_time,d.date=u.date,d.reservation_status=u.reservation_status},Z=()=>{const u={preserveScroll:!0,onSuccess:()=>R()};if(console.log(D.value),C.value&&D.value!==null){d.put(M.update.url(D.value),u);return}},ee=u=>{confirm(`Eliminar reserva "${u.id}"?`)&&F.delete(M.destroy.url(u.id),{preserveScroll:!0})};return(u,o)=>(k(),U(O,null,[i(r(oe),{title:"eventos"}),i(ne,{breadcrumbs:W},{default:a(()=>[s("div",me,[s("section",pe,[s("h1",ce,g(C.value?"Editar usuario":"Nuevo usuario"),1),o[18]||(o[18]=s("p",{class:"mt-1 text-sm text-muted-foreground"}," Gestiona usuarios, rol y personal desde esta misma vista. ",-1)),s("form",{class:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:se(Z,["prevent"])},[s("div",ye,[i(r(q),{for:"id_evento"},{default:a(()=>[...o[8]||(o[8]=[m("ID Evento",-1)])]),_:1}),i(r(V),{id:"id_evento",modelValue:r(d).id_evento,"onUpdate:modelValue":o[0]||(o[0]=l=>r(d).id_evento=l),type:"text",required:""},null,8,["modelValue"]),i(Q,{message:r(d).errors.id_evento},null,8,["message"])]),s("div",fe,[i(r(q),{for:"id_user"},{default:a(()=>[...o[9]||(o[9]=[m("ID Usuario",-1)])]),_:1}),i(r(V),{id:"id_user",modelValue:r(d).id_user,"onUpdate:modelValue":o[1]||(o[1]=l=>r(d).id_user=l),type:"text",required:""},null,8,["modelValue"]),i(Q,{message:r(d).errors.id_user},null,8,["message"])]),s("div",_e,[i(r(q),{for:"id_pay"},{default:a(()=>[...o[10]||(o[10]=[m("ID Pago",-1)])]),_:1}),i(r(V),{id:"id_pay",modelValue:r(d).id_pay,"onUpdate:modelValue":o[2]||(o[2]=l=>r(d).id_pay=l),type:"text"},null,8,["modelValue"]),i(Q,{message:r(d).errors.id_pay},null,8,["message"])]),s("div",ve,[i(r(q),{for:"id_customer"},{default:a(()=>[...o[11]||(o[11]=[m("ID Cliente",-1)])]),_:1}),i(r(V),{id:"id_customer",modelValue:r(d).id_customer,"onUpdate:modelValue":o[3]||(o[3]=l=>r(d).id_customer=l),type:"text"},null,8,["modelValue"]),i(Q,{message:r(d).errors.id_customer},null,8,["message"])]),s("div",he,[i(r(q),{for:"start_time"},{default:a(()=>[...o[12]||(o[12]=[m("Hora Inicio",-1)])]),_:1}),i(r(V),{id:"start_time",modelValue:r(d).start_time,"onUpdate:modelValue":o[4]||(o[4]=l=>r(d).start_time=l),type:"text"},null,8,["modelValue"]),i(Q,{message:r(d).errors.start_time},null,8,["message"])]),s("div",ge,[i(r(q),{for:"end_time"},{default:a(()=>[...o[13]||(o[13]=[m("Hora Final",-1)])]),_:1}),i(r(V),{id:"end_time",modelValue:r(d).end_time,"onUpdate:modelValue":o[5]||(o[5]=l=>r(d).end_time=l),type:"text"},null,8,["modelValue"]),i(Q,{message:r(d).errors.end_time},null,8,["message"])]),s("div",be,[i(r(q),{for:"date"},{default:a(()=>[...o[14]||(o[14]=[m("Fecha",-1)])]),_:1}),i(r(V),{id:"date",modelValue:r(d).date,"onUpdate:modelValue":o[6]||(o[6]=l=>r(d).date=l),type:"text"},null,8,["modelValue"]),i(Q,{message:r(d).errors.date},null,8,["message"])]),s("div",xe,[i(r(q),{for:"reservation_status"},{default:a(()=>[...o[15]||(o[15]=[m("Estado de Reserva",-1)])]),_:1}),de(s("select",{name:"reservation_status",id:"reservation_status","onUpdate:modelValue":o[7]||(o[7]=l=>r(d).reservation_status=l),class:"text-xs text-muted-foreground"},[...o[16]||(o[16]=[s("option",{value:"free",class:"text-black"},"Libre",-1),s("option",{value:"busy",class:"text-black"},"Ocupado",-1)])],512),[[ie,r(d).reservation_status]]),i(Q,{message:r(d).errors.reservation_status},null,8,["message"])]),s("div",Qe,[i(r($),{type:"submit",disabled:r(d).processing||r(F).processing},{default:a(()=>[m(g(C.value?"Actualizar":"Crear"),1)]),_:1},8,["disabled"]),C.value?(k(),le(r($),{key:0,type:"button",variant:"secondary",disabled:r(d).processing||r(F).processing,onClick:R},{default:a(()=>[...o[17]||(o[17]=[m(" Cancelar ",-1)])]),_:1},8,["disabled"])):B("",!0)])],32)]),s("section",Ae,[o[23]||(o[23]=s("h2",{class:"text-lg font-semibold"},"Listado de reservas",-1)),s("div",Ee,[s("table",qe,[o[22]||(o[22]=s("thead",{class:"border-b text-left"},[s("tr",null,[s("th",{class:"px-2 py-2"},"ID Evento"),s("th",{class:"px-2 py-2"},"ID Usuario"),s("th",{class:"px-2 py-2"},"ID Pago"),s("th",{class:"px-2 py-2"},"ID Cliente"),s("th",{class:"px-2 py-2"},"Hora Inicio"),s("th",{class:"px-2 py-2"},"Hora Final"),s("th",{class:"px-2 py-2"},"Fecha"),s("th",{class:"px-2 py-2"},"Estado de Reserva"),s("th",{class:"px-2 py-2"},"Acciones")])],-1)),s("tbody",null,[h.value.length===0?(k(),U("tr",Ve,[...o[19]||(o[19]=[s("td",{colspan:"6",class:"px-2 py-4 text-center text-muted-foreground"}," No hay reservas registradas. ",-1)])])):B("",!0),(k(!0),U(O,null,ue(h.value,l=>(k(),U("tr",{key:l.id,class:"border-b"},[s("td",De,g(l.id_evento),1),s("td",Fe,g(l.id_user),1),s("td",ke,g(l.id_pay),1),s("td",Ce,g(l.id_customer),1),s("td",Ue,g(l.start_time),1),s("td",$e,g(l.end_time),1),s("td",He,g(l.date),1),s("td",Ie,g(l.reservation_status==="free"?"Libre":"Ocupado"),1),s("td",Se,[s("div",we,[i(r($),{type:"button",variant:"secondary",size:"sm",disabled:r(d).processing||r(F).processing,onClick:te=>Y(l)},{default:a(()=>[...o[20]||(o[20]=[m(" Editar ",-1)])]),_:1},8,["disabled","onClick"]),i(r($),{type:"button",variant:"destructive",size:"sm",disabled:r(d).processing||r(F).processing,onClick:te=>ee(l)},{default:a(()=>[...o[21]||(o[21]=[m(" Eliminar ",-1)])]),_:1},8,["disabled","onClick"])])])]))),128))])])]),i(Q,{message:X.value,class:"mt-3"},null,8,["message"])])])]),_:1})],64))}});export{We as default};
