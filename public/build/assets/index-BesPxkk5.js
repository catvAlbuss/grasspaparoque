import{d as W,m as B,c as A,b as l,e as r,h as X,w as h,a as s,t as b,x as Y,z as v,o as E,q as D,A as Z,F as L,r as ee,f as S,g as te}from"./app-D1aKf6HQ.js";import{_ as V}from"./InputError.vue_vue_type_script_setup_true_lang-CgL9GBe8.js";import{_ as k}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-r842F5tj.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-iBsxnF0S.js";import{_ as F}from"./Label.vue_vue_type_script_setup_true_lang-CiogYGa6.js";import{_ as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-C0q0I7zG.js";import{q as _,a as $}from"./index-BDqSilVs.js";import"./index-7JXnH-aQ.js";import"./useForwardExpose-DIjMSpfh.js";import"./VisuallyHidden-DVQk3b_7.js";import"./useForwardPropsEmits-CbqjJXiP.js";import"./createLucideIcon-lstEoCdR.js";import"./index-ZGzMK47R.js";const a=e=>({url:a.url(e),method:"get"});a.definition={methods:["get","head"],url:"/eventos"};a.url=e=>a.definition.url+_(e);a.get=e=>({url:a.url(e),method:"get"});a.head=e=>({url:a.url(e),method:"head"});const N=e=>({action:a.url(e),method:"get"});N.get=e=>({action:a.url(e),method:"get"});N.head=e=>({action:a.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});a.form=N;const m=e=>({url:m.url(e),method:"get"});m.definition={methods:["get","head"],url:"/eventos/create"};m.url=e=>m.definition.url+_(e);m.get=e=>({url:m.url(e),method:"get"});m.head=e=>({url:m.url(e),method:"head"});const U=e=>({action:m.url(e),method:"get"});U.get=e=>({action:m.url(e),method:"get"});U.head=e=>({action:m.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});m.form=U;const f=e=>({url:f.url(e),method:"post"});f.definition={methods:["post"],url:"/eventos"};f.url=e=>f.definition.url+_(e);f.post=e=>({url:f.url(e),method:"post"});const I=e=>({action:f.url(e),method:"post"});I.post=e=>({action:f.url(e),method:"post"});f.form=I;const c=(e,t)=>({url:c.url(e,t),method:"get"});c.definition={methods:["get","head"],url:"/eventos/{evento}"};c.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={evento:e}),Array.isArray(e)&&(e={evento:e[0]}),e=$(e);const y={evento:e.evento};return c.definition.url.replace("{evento}",y.evento.toString()).replace(/\/+$/,"")+_(t)};c.get=(e,t)=>({url:c.url(e,t),method:"get"});c.head=(e,t)=>({url:c.url(e,t),method:"head"});const P=(e,t)=>({action:c.url(e,t),method:"get"});P.get=(e,t)=>({action:c.url(e,t),method:"get"});P.head=(e,t)=>({action:c.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});c.form=P;const p=(e,t)=>({url:p.url(e,t),method:"get"});p.definition={methods:["get","head"],url:"/eventos/{evento}/edit"};p.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={evento:e}),Array.isArray(e)&&(e={evento:e[0]}),e=$(e);const y={evento:e.evento};return p.definition.url.replace("{evento}",y.evento.toString()).replace(/\/+$/,"")+_(t)};p.get=(e,t)=>({url:p.url(e,t),method:"get"});p.head=(e,t)=>({url:p.url(e,t),method:"head"});const T=(e,t)=>({action:p.url(e,t),method:"get"});T.get=(e,t)=>({action:p.url(e,t),method:"get"});T.head=(e,t)=>({action:p.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});p.form=T;const u=(e,t)=>({url:u.url(e,t),method:"put"});u.definition={methods:["put","patch"],url:"/eventos/{evento}"};u.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={evento:e}),Array.isArray(e)&&(e={evento:e[0]}),e=$(e);const y={evento:e.evento};return u.definition.url.replace("{evento}",y.evento.toString()).replace(/\/+$/,"")+_(t)};u.put=(e,t)=>({url:u.url(e,t),method:"put"});u.patch=(e,t)=>({url:u.url(e,t),method:"patch"});const H=(e,t)=>({action:u.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});H.put=(e,t)=>({action:u.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});H.patch=(e,t)=>({action:u.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});u.form=H;const g=(e,t)=>({url:g.url(e,t),method:"delete"});g.definition={methods:["delete"],url:"/eventos/{evento}"};g.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={evento:e}),Array.isArray(e)&&(e={evento:e[0]}),e=$(e);const y={evento:e.evento};return g.definition.url.replace("{evento}",y.evento.toString()).replace(/\/+$/,"")+_(t)};g.delete=(e,t)=>({url:g.url(e,t),method:"delete"});const G=(e,t)=>({action:g.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});G.delete=(e,t)=>({action:g.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});g.form=G;const w={store:f,update:u,destroy:g},oe={class:"space-y-6 p-4"},se={class:"rounded-xl border border-sidebar-border/70 bg-background p-4"},de={class:"text-xl font-semibold"},le={class:"grid gap-2"},ne={class:"grid gap-2"},ue={class:"grid gap-2"},ie={class:"grid gap-2"},ae={key:0,class:"text-xs text-muted-foreground"},me={class:"col-span-full flex gap-2"},ce={class:"rounded-xl border border-sidebar-border/70 bg-background p-4"},pe={class:"mt-4 overflow-x-auto"},ye={class:"w-full min-w-[720px] text-sm"},fe={key:0},ge={class:"px-2 py-2"},he={class:"px-2 py-2"},ve={class:"px-2 py-2"},be={class:"px-2 py-2"},_e={class:"px-2 py-2"},xe={class:"px-2 py-2"},Qe={class:"flex gap-2"},Pe=W({__name:"index",props:{eventos:{}},setup(e){const t=e,y=S(()=>t.eventos),M=[{title:"eventos",href:"./eventos"}],x=te(null),d=B({nombre:"",precio:"",descripcion:"",estado:1}),Q=B({}),j=S(()=>Q.errors.delete),q=S(()=>x.value!==null),z=()=>{x.value=null,d.reset(),d.clearErrors()},J=i=>{x.value=i.id,d.clearErrors(),d.nombre=i.nombre,d.precio=i.precio,d.descripcion=i.descripcion,d.estado=i.estado},K=()=>{const i={preserveScroll:!0,onSuccess:()=>z()};if(console.log(x.value),q.value&&x.value!==null){d.put(w.update.url(x.value),i);return}d.post(w.store.url(),i)},O=i=>{confirm(`Eliminar usuario "${i.nombre}"?`)&&Q.delete(w.destroy.url(i.id),{preserveScroll:!0})};return(i,o)=>(E(),A(L,null,[l(r(X),{title:"eventos"}),l(re,{breadcrumbs:M},{default:h(()=>[s("div",oe,[s("section",se,[s("h1",de,b(q.value?"Editar usuario":"Nuevo usuario"),1),o[9]||(o[9]=s("p",{class:"mt-1 text-sm text-muted-foreground"}," Gestiona usuarios, rol y personal desde esta misma vista. ",-1)),s("form",{class:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:Y(K,["prevent"])},[s("div",le,[l(r(F),{for:"name"},{default:h(()=>[...o[4]||(o[4]=[v("Nombre",-1)])]),_:1}),l(r(C),{id:"name",modelValue:r(d).nombre,"onUpdate:modelValue":o[0]||(o[0]=n=>r(d).nombre=n),type:"text",required:""},null,8,["modelValue"]),l(V,{message:r(d).errors.nombre},null,8,["message"])]),s("div",ne,[l(r(F),{for:""},{default:h(()=>[...o[5]||(o[5]=[v("Precio",-1)])]),_:1}),l(r(C),{id:"",modelValue:r(d).precio,"onUpdate:modelValue":o[1]||(o[1]=n=>r(d).precio=n),type:"text",required:""},null,8,["modelValue"]),l(V,{message:r(d).errors.precio},null,8,["message"])]),s("div",ue,[l(r(F),{for:"personal"},{default:h(()=>[...o[6]||(o[6]=[v("Descripcion",-1)])]),_:1}),l(r(C),{id:"personal",modelValue:r(d).descripcion,"onUpdate:modelValue":o[2]||(o[2]=n=>r(d).descripcion=n),type:"text"},null,8,["modelValue"]),l(V,{message:r(d).errors.descripcion},null,8,["message"])]),s("div",ie,[l(r(F),{for:"estado"},{default:h(()=>[o[7]||(o[7]=v(" Estado ",-1)),q.value?(E(),A("span",ae,"(opcional en edicion)")):D("",!0)]),_:1}),l(r(C),{id:"estado",modelValue:r(d).estado,"onUpdate:modelValue":o[3]||(o[3]=n=>r(d).estado=n),type:"number",required:!q.value},null,8,["modelValue","required"]),l(V,{message:r(d).errors.estado},null,8,["message"])]),s("div",me,[l(r(k),{type:"submit",disabled:r(d).processing||r(Q).processing},{default:h(()=>[v(b(q.value?"Actualizar":"Crear"),1)]),_:1},8,["disabled"]),q.value?(E(),Z(r(k),{key:0,type:"button",variant:"secondary",disabled:r(d).processing||r(Q).processing,onClick:z},{default:h(()=>[...o[8]||(o[8]=[v(" Cancelar ",-1)])]),_:1},8,["disabled"])):D("",!0)])],32)]),s("section",ce,[o[14]||(o[14]=s("h2",{class:"text-lg font-semibold"},"Listado de eventos",-1)),s("div",pe,[s("table",ye,[o[13]||(o[13]=s("thead",{class:"border-b text-left"},[s("tr",null,[s("th",{class:"px-2 py-2"},"ID"),s("th",{class:"px-2 py-2"},"Nombre"),s("th",{class:"px-2 py-2"},"Precio"),s("th",{class:"px-2 py-2"},"Descripcion"),s("th",{class:"px-2 py-2"},"Estado")])],-1)),s("tbody",null,[y.value.length===0?(E(),A("tr",fe,[...o[10]||(o[10]=[s("td",{colspan:"6",class:"px-2 py-4 text-center text-muted-foreground"}," No hay usuarios registrados. ",-1)])])):D("",!0),(E(!0),A(L,null,ee(y.value,n=>(E(),A("tr",{key:n.id,class:"border-b"},[s("td",ge,b(n.id),1),s("td",he,b(n.nombre),1),s("td",ve,b(n.precio),1),s("td",be,b(n.descripcion??"-"),1),s("td",_e,b(n.estado??"-"),1),s("td",xe,[s("div",Qe,[l(r(k),{type:"button",variant:"secondary",size:"sm",disabled:r(d).processing||r(Q).processing,onClick:R=>J(n)},{default:h(()=>[...o[11]||(o[11]=[v(" Editar ",-1)])]),_:1},8,["disabled","onClick"]),l(r(k),{type:"button",variant:"destructive",size:"sm",disabled:r(d).processing||r(Q).processing,onClick:R=>O(n)},{default:h(()=>[...o[12]||(o[12]=[v(" Eliminar ",-1)])]),_:1},8,["disabled","onClick"])])])]))),128))])])]),l(V,{message:j.value,class:"mt-3"},null,8,["message"])])])]),_:1})],64))}});export{Pe as default};
